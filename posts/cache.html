<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>컴퓨터 구조 - Cache</title><meta name="description" content="Cache의 개념은 컴퓨터가 메모리를 접근하는 데 걸리는 시간이 너무 오래 걸려서 생긴 개념이다. 일반적으로 컴퓨터는 하드디스크에 메모리를 저장하는데, 컴퓨터가 매번 어떤 변수에 데이터를 넣거나 어떤 데이터를 불러올 때 하드디스크와 직접 소통하면 시간이 너무 걸릴 수 있는 단점이 존재한다."/><meta name="title" content="컴퓨터 구조 - Cache"/><meta property="og:image" content="https://donghunkim.dev/assets/posts/cache/thumbnail.png"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><meta name="og:sitename" content="Donghun Kim | Developer"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="google-site-verification" content="l9pNikVAOmXekB00LXYnclf9f_nyVIIjDvu4s2DdYtQ"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/media/5d7fcf765059a344-s.p.otf" as="font" type="font/otf" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/ac7c9f14c7799d15-s.p.otf" as="font" type="font/otf" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/535c141938fc81c3-s.p.otf" as="font" type="font/otf" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/e11418ac562b8ac1-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/a955ec04d7fe9324.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/a955ec04d7fe9324.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/92b5d4034cf97289.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/92b5d4034cf97289.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-66d32731bdd20e83.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-5d77cecfe18a5947.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-e35f58c0210c308e.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/fb7d5399-77a75513571cc99c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/317522db-a1e300886af6caee.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/336-0626ea9457c579cc.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/619-9195e5b60e53e070.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/634-c75673bec9d82092.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-ebb65febdc7954e7.js" defer="" crossorigin=""></script><script src="/_next/static/kHIBZDqh5Me3FZRStPnag/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/kHIBZDqh5Me3FZRStPnag/_ssgManifest.js" defer="" crossorigin=""></script></head><body class="bg-[black]"><div id="__next"><style data-mantine-styles="classes">@media (max-width: 35.99375em) {.mantine-visible-from-xs {display: none !important;}}@media (min-width: 36em) {.mantine-hidden-from-xs {display: none !important;}}@media (max-width: 47.99375em) {.mantine-visible-from-sm {display: none !important;}}@media (min-width: 48em) {.mantine-hidden-from-sm {display: none !important;}}@media (max-width: 61.99375em) {.mantine-visible-from-md {display: none !important;}}@media (min-width: 62em) {.mantine-hidden-from-md {display: none !important;}}@media (max-width: 74.99375em) {.mantine-visible-from-lg {display: none !important;}}@media (min-width: 75em) {.mantine-hidden-from-lg {display: none !important;}}@media (max-width: 87.99375em) {.mantine-visible-from-xl {display: none !important;}}@media (min-width: 88em) {.mantine-hidden-from-xl {display: none !important;}}</style><main class="__variable_56c696 __variable_3a0388"><div class="" style="position:fixed;top:0;left:0;height:2px;background:transparent;z-index:99999999999;width:100%"><div class="" style="height:100%;background:rgba(255,255,255,0.8);transition:all 500ms ease;width:0%"><div style="box-shadow:0 0 10px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.8);width:5%;opacity:1;position:absolute;height:100%;transition:all 500ms ease;transform:rotate(2deg) translate(0px, -2px);left:-10rem"></div></div></div><div style="transition:all 0.3s ease-in-out;backdrop-filter:blur(10px);align-items:center;justify-content:space-between;padding-left:calc(1.25rem * var(--mantine-scale));padding-right:calc(1.25rem * var(--mantine-scale));background:rgba(0,0,0,0.2);width:100%;height:calc(3.5rem * var(--mantine-scale));position:fixed" class="z-50 text-white m_8bffd616 mantine-Flex-root __m__-R2nm"><div style="transform:rotate(0deg);transition:transform 500ms" class="cursor-pointer transition-all"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-arrow-up "><path d="M12 5l0 14"></path><path d="M18 11l-6 -6"></path><path d="M6 11l6 -6"></path></svg></div><style data-mantine-styles="inline">.__m__-Rbbanm{position:relative;}@media(min-width: 62em){.__m__-Rbbanm{position:absolute;left:50%;}}</style><div style="white-space:nowrap;transform:translate(-50%, 0);gap:var(--mantine-spacing-sm)" class="m_8bffd616 mantine-Flex-root __m__-R1banm __m__-Rbbanm"><style data-mantine-styles="inline">.__m__-R2rbanm{max-width:calc(-6.25rem * var(--mantine-scale));}@media(min-width: 62em){.__m__-R2rbanm{max-width:none;}}</style><p class="mantine-focus-auto truncate m_b6d8b162 mantine-Text-root __m__-R2rbanm"><span class="mantine-focus-auto w-fit m_b6d8b162 mantine-Text-root"><span class="mantine-focus-auto font-sans font-medium m_b6d8b162 mantine-Text-root">computer-architecture</span><span style="margin-left:calc(0.3125rem * var(--mantine-scale));margin-right:calc(0.3125rem * var(--mantine-scale))" class="mantine-focus-auto m_b6d8b162 mantine-Text-root">|</span><span class="mantine-focus-auto font-sans font-normal m_b6d8b162 mantine-Text-root">컴퓨터 구조 - Cache</span></span></p></div><style data-mantine-styles="inline">.__m__-R1ranm{display:none;}@media(min-width: 62em){.__m__-R1ranm{display:block;}}</style><div class="__m__-R1ranm"><p class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">2022-08-23</p></div></div><div style="height:300px;background-image:url(/assets/background/noise30.png)" class="relative"><div style="height:150px;width:100%;background-image:linear-gradient(to top, rgba(0,0,0,1), rgba(0,0,0,0));position:absolute;top:calc(9.375rem * var(--mantine-scale));left:0rem" class=""></div></div><div class="relative min-h-screen text-[#fff] overflow-x-hidden"><main><div class="container mx-auto px-5 max-w-5xl"><article class="mb-32"><div class="max-w-3xl mx-auto"><div style="gap:var(--mantine-spacing-lg);flex-direction:column" class="mb-6 text-lg m_8bffd616 mantine-Flex-root __m__-R5knm"><p style="--text-fz:calc(2.5rem * var(--mantine-scale));--text-lh:40px;line-height:1.2em;letter-spacing:1px" class="mantine-focus-auto font-tiempos m_b6d8b162 mantine-Text-root">컴퓨터 구조 - Cache</p><p style="margin-top:calc(0.5rem * var(--mantine-scale));opacity:0.5" class="mantine-focus-auto font-tiempos font-thin m_b6d8b162 mantine-Text-root"><span class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">Posted on:</span><span style="margin-left:calc(0.3125rem * var(--mantine-scale))" class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">2022-08-23</span></p><p class="mantine-focus-auto font-sans font-thin m_b6d8b162 mantine-Text-root">Category:<!-- --> <span class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">computer-architecture<!-- --> </span></p></div></div><div class="max-w-3xl mx-auto"><div class="markdown-styles_markdown__MNzbo"><h2>Size and access time are inversely proportional!</h2>
<p>Cache는 사실 이후 프로그래밍을 할 때 언젠가 써볼 수 있는 개념이라고 생각된다. Cache를 이해하기 위해서는 컴퓨터의 작동방법에 대해서 조금 알고 있어야 한다. Cache의 개념은 컴퓨터가 메모리를 접근하는 데 걸리는 시간이 너무 오래 걸려서 생긴 개념이다. 일반적으로 컴퓨터는 하드디스크에 메모리를 저장하는데, 컴퓨터가 매번 어떤 변수에 데이터를 넣거나 어떤 데이터를 불러올 때 하드디스크와 직접 소통하면 시간이 너무 걸릴 수 있는 단점이 존재한다. <code>(하드디스크와 직접 소통하는 것이 머리에 안 그려지면, 컴퓨터가 어떻게 CD에서 정보를 가져오는지 한번 생각하면 된다. CD를 물리적으로 돌려서 정보를 가져오는데, 이걸 매번 한다고 생각하면...😱)</code> 그래서 생긴 개념이 Cache이다.</p>
<p>Cache는 컴퓨터가 자주 접근하는 메모리를 일단 임시로 저장하는 table이라고 보면 된다. 변수에 대한 업데이트가 일어나면 하드디스크에 직접 수정사항을 변경하는 것이 아니라 일단 해당 table에 그 수정사항을 반영하는 것이다. Cache는 일단 새로 접근되는 메모리를 다 table에 추가할 것이다. 하지만, 어떤 row들은 얼마 시간 후에 접근이 안 될 것이고 Cache table 또한 꽉 찰 것이다<code>(Cache는 하드디스크보다 용량이 클 순 없으니... Size와 access time은 반비례한다는 사실!)</code>. 이런 경우, 최근에 가장 덜 접근된 row를 추방할 것이다. 수업시간 때 배운 대부분 cache의 구조는 이러했다. 1 Valid bit, Tag(address의 상위 bit), Data 가 하나의 line을 구성했다. 이렇게 써 놓으니깐 이해하기 힘들기 때문에 사진을 첨부하겠다.</p>
<p><img src="/assets/posts/cache/thumbnail.png" alt="Cache Memo"></p>
<p>이런 식으로 구성된다. 2^s개의 line이 존재하고 input(table을 위한 열쇠라고도 볼 수 있겠다) address에서 s bit을 활용해 index, line number를 찾고, valid 한지 여부를 확인하고 나머지 offset bit을 활용하여 data를 추출해내는 구조였다. 실제 이런 구조는 memory cache뿐만 아니라 TLB(virtual page number를 physical page number로 바꿔주는 친구), BTB(instruction address로부터 target branch prediction을 바로 찾게 해주는 친구)에도 쓰였다. 이 table은 access time이 훨씬 더 걸리는 더 큰 메모리에 접근하는 시간을 최대한 낮춰주고자 만든 개념이라고 보면 된다.</p>
<p>지금 사진에서는 direct mapped cache가 나와있는데, 이는 하나의 line이 하나의 address에만 대응되게끔 한 단순 cache이다. 이를 조금 더 복잡하게 구현하면 n way set associative cache 도 존재하는 이는, 하나의 line에 n개의 address가 대응될 수 있게 만든 것이다. 다만 이것의 문제는 이제 line안에서 또 찾는 시간이 걸리기 때문에 access time이 더 증가할 수 있는 것이 문제다.</p>
<p>cache는 실제 전체 메모리가 아닌 관계로 항상 원하는 결과를 내놓지 않을 수 있고, 심지어 index를 했는데 알고보니 tag와 달라서 miss가 날 때도 있다. 이 miss가 날 경우 실제 메모리에 접근해서 옳은 값을 가져와 table을 수정해야 하는데 그러한 다양한 고려사항을 수업시간 때 배웠다.</p></div></div><div class="max-w-3xl mx-auto mt-16 mb-16"><div style="justify-content:space-between;flex-wrap:wrap;margin-bottom:calc(1.25rem * var(--mantine-scale));color:var(--mantine-color-white);width:100%" class="m_8bffd616 mantine-Flex-root __m__-Rdknm"><a class="border border-white/20 rounded-lg md:hover:scale-[1.01] transition hover:shadow-lg duration-200 cursor-pointer drop-shadow-md p-3 mb-3" style="background-image:url(/assets/background/noise50.png)" href="/posts/parametric_surface"><p class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">Previous</p><div style="gap:var(--mantine-spacing-sm);align-items:center" class="m_8bffd616 mantine-Flex-root __m__-Rjddknm"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-arrow-left "><path d="M5 12l14 0"></path><path d="M5 12l6 6"></path><path d="M5 12l6 -6"></path></svg><p class="mantine-focus-auto text-sm font-sans font-bold text-left m_b6d8b162 mantine-Text-root"> <!-- -->3D Parametric curves and surfaces for computer visualization</p></div></a></div></div><section></section></article></div><div style="background-image:linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,1));width:100%;height:calc(5rem * var(--mantine-scale));position:fixed;bottom:0rem" class="z-50"></div><div style="height:1000px;background-image:url(/assets/background/noise30.png)" class="absolute bottom-0 bg-red-400 w-full -z-10"><div style="height:500px;width:100%;background-image:linear-gradient(to bottom, rgba(0,0,0,1), rgba(0,0,0,0));position:absolute;top:0rem;left:0rem" class=""></div></div></main></div></main></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"post":{"title":"컴퓨터 구조 - Cache","date":"2022-08-23","slug":"cache","author":{"name":"Kim Dong Hun"},"content":"\u003ch2\u003eSize and access time are inversely proportional!\u003c/h2\u003e\n\u003cp\u003eCache는 사실 이후 프로그래밍을 할 때 언젠가 써볼 수 있는 개념이라고 생각된다. Cache를 이해하기 위해서는 컴퓨터의 작동방법에 대해서 조금 알고 있어야 한다. Cache의 개념은 컴퓨터가 메모리를 접근하는 데 걸리는 시간이 너무 오래 걸려서 생긴 개념이다. 일반적으로 컴퓨터는 하드디스크에 메모리를 저장하는데, 컴퓨터가 매번 어떤 변수에 데이터를 넣거나 어떤 데이터를 불러올 때 하드디스크와 직접 소통하면 시간이 너무 걸릴 수 있는 단점이 존재한다. \u003ccode\u003e(하드디스크와 직접 소통하는 것이 머리에 안 그려지면, 컴퓨터가 어떻게 CD에서 정보를 가져오는지 한번 생각하면 된다. CD를 물리적으로 돌려서 정보를 가져오는데, 이걸 매번 한다고 생각하면...😱)\u003c/code\u003e 그래서 생긴 개념이 Cache이다.\u003c/p\u003e\n\u003cp\u003eCache는 컴퓨터가 자주 접근하는 메모리를 일단 임시로 저장하는 table이라고 보면 된다. 변수에 대한 업데이트가 일어나면 하드디스크에 직접 수정사항을 변경하는 것이 아니라 일단 해당 table에 그 수정사항을 반영하는 것이다. Cache는 일단 새로 접근되는 메모리를 다 table에 추가할 것이다. 하지만, 어떤 row들은 얼마 시간 후에 접근이 안 될 것이고 Cache table 또한 꽉 찰 것이다\u003ccode\u003e(Cache는 하드디스크보다 용량이 클 순 없으니... Size와 access time은 반비례한다는 사실!)\u003c/code\u003e. 이런 경우, 최근에 가장 덜 접근된 row를 추방할 것이다. 수업시간 때 배운 대부분 cache의 구조는 이러했다. 1 Valid bit, Tag(address의 상위 bit), Data 가 하나의 line을 구성했다. 이렇게 써 놓으니깐 이해하기 힘들기 때문에 사진을 첨부하겠다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/posts/cache/thumbnail.png\" alt=\"Cache Memo\"\u003e\u003c/p\u003e\n\u003cp\u003e이런 식으로 구성된다. 2^s개의 line이 존재하고 input(table을 위한 열쇠라고도 볼 수 있겠다) address에서 s bit을 활용해 index, line number를 찾고, valid 한지 여부를 확인하고 나머지 offset bit을 활용하여 data를 추출해내는 구조였다. 실제 이런 구조는 memory cache뿐만 아니라 TLB(virtual page number를 physical page number로 바꿔주는 친구), BTB(instruction address로부터 target branch prediction을 바로 찾게 해주는 친구)에도 쓰였다. 이 table은 access time이 훨씬 더 걸리는 더 큰 메모리에 접근하는 시간을 최대한 낮춰주고자 만든 개념이라고 보면 된다.\u003c/p\u003e\n\u003cp\u003e지금 사진에서는 direct mapped cache가 나와있는데, 이는 하나의 line이 하나의 address에만 대응되게끔 한 단순 cache이다. 이를 조금 더 복잡하게 구현하면 n way set associative cache 도 존재하는 이는, 하나의 line에 n개의 address가 대응될 수 있게 만든 것이다. 다만 이것의 문제는 이제 line안에서 또 찾는 시간이 걸리기 때문에 access time이 더 증가할 수 있는 것이 문제다.\u003c/p\u003e\n\u003cp\u003ecache는 실제 전체 메모리가 아닌 관계로 항상 원하는 결과를 내놓지 않을 수 있고, 심지어 index를 했는데 알고보니 tag와 달라서 miss가 날 때도 있다. 이 miss가 날 경우 실제 메모리에 접근해서 옳은 값을 가져와 table을 수정해야 하는데 그러한 다양한 고려사항을 수업시간 때 배웠다.\u003c/p\u003e","keyword":"Cache","categories":["computer-architecture"],"thumbnail":"/assets/posts/cache/thumbnail.png","excerpt":"Cache의 개념은 컴퓨터가 메모리를 접근하는 데 걸리는 시간이 너무 오래 걸려서 생긴 개념이다. 일반적으로 컴퓨터는 하드디스크에 메모리를 저장하는데, 컴퓨터가 매번 어떤 변수에 데이터를 넣거나 어떤 데이터를 불러올 때 하드디스크와 직접 소통하면 시간이 너무 걸릴 수 있는 단점이 존재한다.","data":{"title":"컴퓨터 구조 - Cache","excerpt":"Cache의 개념은 컴퓨터가 메모리를 접근하는 데 걸리는 시간이 너무 오래 걸려서 생긴 개념이다. 일반적으로 컴퓨터는 하드디스크에 메모리를 저장하는데, 컴퓨터가 매번 어떤 변수에 데이터를 넣거나 어떤 데이터를 불러올 때 하드디스크와 직접 소통하면 시간이 너무 걸릴 수 있는 단점이 존재한다.","date":"2022-08-23","author":{"name":"Kim Dong Hun"},"keyword":"Cache","categories":["computer-architecture"],"WIP":true,"thumbnail":"/assets/posts/cache/thumbnail.png"},"nextPath":"","prevPath":"/posts/parametric_surface","prevTitle":"3D Parametric curves and surfaces for computer visualization","nextTitle":"","isMdx":false}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"cache"},"buildId":"kHIBZDqh5Me3FZRStPnag","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>