<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Toonie: Real-time Collaborative image review editor</title><meta name="description" content="Toonie is a real-time CRDT-based collaborative image review editor designed for streamlined image feedback. It introduces optimized techniques for multiplayer whiteboards, separating real-time interactions from committed actions for enhanced performance."/><meta name="title" content="Toonie: Real-time Collaborative image review editor"/><meta property="og:image" content="https://donghunkim.dev/assets/project/toonie/thumbnail.png"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><meta name="og:sitename" content="Donghun Kim"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="google-site-verification" content="l9pNikVAOmXekB00LXYnclf9f_nyVIIjDvu4s2DdYtQ"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/media/5d7fcf765059a344-s.p.otf" as="font" type="font/otf" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/ac7c9f14c7799d15-s.p.otf" as="font" type="font/otf" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/535c141938fc81c3-s.p.otf" as="font" type="font/otf" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/e11418ac562b8ac1-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/a955ec04d7fe9324.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/a955ec04d7fe9324.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/92b5d4034cf97289.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/92b5d4034cf97289.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-66d32731bdd20e83.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-5d77cecfe18a5947.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-e35f58c0210c308e.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/fb7d5399-77a75513571cc99c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/317522db-a1e300886af6caee.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/336-0626ea9457c579cc.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/619-9195e5b60e53e070.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/634-0a3f0a1b4521217b.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/projects/%5Bslug%5D-bf4878c317f515c4.js" defer="" crossorigin=""></script><script src="/_next/static/Nrx6G7fzvUnEFg3X6aJNX/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/Nrx6G7fzvUnEFg3X6aJNX/_ssgManifest.js" defer="" crossorigin=""></script></head><body class="bg-[black]"><div id="__next"><style data-mantine-styles="classes">@media (max-width: 35.99375em) {.mantine-visible-from-xs {display: none !important;}}@media (min-width: 36em) {.mantine-hidden-from-xs {display: none !important;}}@media (max-width: 47.99375em) {.mantine-visible-from-sm {display: none !important;}}@media (min-width: 48em) {.mantine-hidden-from-sm {display: none !important;}}@media (max-width: 61.99375em) {.mantine-visible-from-md {display: none !important;}}@media (min-width: 62em) {.mantine-hidden-from-md {display: none !important;}}@media (max-width: 74.99375em) {.mantine-visible-from-lg {display: none !important;}}@media (min-width: 75em) {.mantine-hidden-from-lg {display: none !important;}}@media (max-width: 87.99375em) {.mantine-visible-from-xl {display: none !important;}}@media (min-width: 88em) {.mantine-hidden-from-xl {display: none !important;}}</style><main class="__variable_56c696 __variable_3a0388"><div class="" style="position:fixed;top:0;left:0;height:2px;background:transparent;z-index:99999999999;width:100%"><div class="" style="height:100%;background:rgba(255,255,255,0.8);transition:all 500ms ease;width:0%"><div style="box-shadow:0 0 10px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.8);width:5%;opacity:1;position:absolute;height:100%;transition:all 500ms ease;transform:rotate(2deg) translate(0px, -2px);left:-10rem"></div></div></div><div style="transition:all 0.3s ease-in-out;backdrop-filter:blur(10px);align-items:center;justify-content:space-between;padding-left:calc(1.25rem * var(--mantine-scale));padding-right:calc(1.25rem * var(--mantine-scale));background:rgba(0,0,0,0.2);width:100%;height:calc(3.5rem * var(--mantine-scale));position:fixed" class="z-50 text-white m_8bffd616 mantine-Flex-root __m__-R2nm"><div style="transform:rotate(0deg);transition:transform 500ms" class="cursor-pointer transition-all"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-arrow-up "><path d="M12 5l0 14"></path><path d="M18 11l-6 -6"></path><path d="M6 11l6 -6"></path></svg></div><style data-mantine-styles="inline">.__m__-Rbbanm{position:relative;}@media(min-width: 62em){.__m__-Rbbanm{position:absolute;left:50%;}}</style><div style="white-space:nowrap;transform:translate(-50%, 0);gap:var(--mantine-spacing-sm)" class="m_8bffd616 mantine-Flex-root __m__-R1banm __m__-Rbbanm"><style data-mantine-styles="inline">.__m__-R2rbanm{max-width:calc(-6.25rem * var(--mantine-scale));}@media(min-width: 62em){.__m__-R2rbanm{max-width:none;}}</style><p class="mantine-focus-auto truncate m_b6d8b162 mantine-Text-root __m__-R2rbanm"><span class="mantine-focus-auto w-fit m_b6d8b162 mantine-Text-root"><span class="mantine-focus-auto font-sans font-medium m_b6d8b162 mantine-Text-root">Web Development</span><span style="margin-left:calc(0.3125rem * var(--mantine-scale));margin-right:calc(0.3125rem * var(--mantine-scale))" class="mantine-focus-auto m_b6d8b162 mantine-Text-root">|</span><span class="mantine-focus-auto font-sans font-normal m_b6d8b162 mantine-Text-root">Toonie: Real-time Collaborative image review editor</span></span></p></div><style data-mantine-styles="inline">.__m__-R1ranm{display:none;}@media(min-width: 62em){.__m__-R1ranm{display:block;}}</style><div class="__m__-R1ranm"><p class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">2022</p></div></div><div style="height:300px;background-image:url(/assets/background/noise30.png)" class="relative"><div style="height:150px;width:100%;background-image:linear-gradient(to top, rgba(0,0,0,1), rgba(0,0,0,0));position:absolute;top:calc(9.375rem * var(--mantine-scale));left:0rem" class=""></div></div><div class="relative min-h-screen text-[#fff] overflow-x-hidden"><main><div class="container mx-auto px-5 max-w-5xl"><article class="mb-32"><div class="max-w-3xl mx-auto"><div style="gap:var(--mantine-spacing-lg);flex-direction:column" class="mb-6 text-lg m_8bffd616 mantine-Flex-root __m__-R5knm"><p style="--text-fz:calc(2.5rem * var(--mantine-scale));--text-lh:40px;line-height:1.2em;letter-spacing:1px" class="mantine-focus-auto font-tiempos m_b6d8b162 mantine-Text-root">Toonie: Real-time Collaborative image review editor</p><p style="margin-top:calc(0.5rem * var(--mantine-scale));opacity:0.5" class="mantine-focus-auto font-tiempos font-thin m_b6d8b162 mantine-Text-root"><span class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">Posted on:</span><span style="margin-left:calc(0.3125rem * var(--mantine-scale))" class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">2022-08-19</span></p><p class="mantine-focus-auto font-sans font-thin m_b6d8b162 mantine-Text-root">Category:<!-- --> <span class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">Web Development, <!-- --> </span><span class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">Computer Graphics<!-- --> </span></p></div></div><div class="max-w-3xl mx-auto"><div class="markdown-styles_markdown__MNzbo"><p>Collaborative editing is a rising star in software development. Now, people not only want smart editors, but they also want an editor that allows real-time collaboration with other people. Collaborating with other people is a great way to increase productivity and get feedback on your work. The COVID-19 pandemic familiarized people with the concept of collaborative editing, and now, many people are using collaborative editors in their daily lives.</p>
<h3>Difficulties in implementing multiplayer editors</h3>
<p>However, implementing a multiplayer aspect into an editor is not an easy task. First, one should have basic knowledge of how to manage multiple actions from multiple agents. What happens if two people try to edit the same part of the document at the same time? What happens if one person deletes a part of the document while the other person is editing the same part? These are the questions that one should be able to answer when they want to implement a collaborative editor.</p>
<p>Second, one should have to decide what features shall be communicated between users, and how their concurrent actions do not cause overhead. Relaying data between users can be costly and unreliable in some cases, so one should carefully design the data flow between users in a way that it does not harm user experience.</p>
<h3>Building a whiteboard multiplayer editor</h3>
<p>Toonie is a real-time CRDT-based collaborative image review editor that I created to research optimization techniques for implementing CRDT mechanisms into whiteboards. In Toonie, users can review on images uploaded to the service together by sharing a URL to another person. The reason I chose an image review domain specifically is because most collaborative editors out there are for general purposes. Thus, I wanted to create a more narrow focused whiteboard where designers and marketers could review on images together by drawing sketches on the images in an online meeting setting.</p>
<p><img src="/assets/project/toonie/edit.png" alt="Editing Scene"></p>
<p>Toonie wass built on top of the CRDT-based collaborative SDK called <a href="https://github.com/yorkie-team/yorkie">Yorkie</a> which is an opensource document store for building collaborative applications created by Naver Alto TF. While contributing to the opensource project, I created Toonie for demonstrating the capabilities of Yorkie.</p>
<h3>How Toonie works</h3>
<p>When creating a multiplayer whiteboard, one should distinguish between actions that need its commit order to be preserved and actions that do not need its commit order to be preserved. This is because in multiplayer operations, actions that needs its order to be preserved consume much computer resources during communication, which can eventually result in lags.</p>
<p>In Yorkie, actions that do not need its order to be preserved were managed as <code>Presence</code>, and those that needed its order to be preserved (= that is in need of management through CRDT algorithms) were managed as <code>Data</code>. In a whiteboard application, the real-time action (interactions that the user commits to the whiteboard while their mouse is down) do not really need to be communcated with its order preserved since their actions are not finished, and thus can be managed as <code>Presence</code>. However, the committed action, which is a finished action of a user (mouse up after mouse down) should have its order preserved since it is a finished action. Those were managed as <code>Data</code>.</p>
<p><img src="/assets/project/toonie/soc_step1.png" alt="User interaction recorded as presenc"></p>
<p><img src="/assets/project/toonie/soc_step2.png" alt="User interaction finishes and presence is reset"></p>
<p><img src="/assets/project/toonie/soc_step3.png" alt="Presence modifications are transferred to data"></p>
<h3>Methods of Optimization</h3>
<p>Separation of concerns was used for implementing the distinction between <code>Presence</code> and <code>Data</code>, and thus multiple layers (presence canvas and data canvas) were designed for the whiteboard application. A user's real-time unfinished interactions (whiteboard modifications that occur while the user's mouse is pressed) were drawn in the <code>Presence</code> canvas. And as soon as the user's interaction finishes (user finishes modification by mouseup), then the <code>Presence</code> canvas data is reset and the modification data is sent to the <code>Data</code> Canvas. By doing so, I was able to design a software design approach for optimizing collaborative whiteboards.</p></div></div><div class="max-w-3xl mx-auto mt-16 mb-16"><div style="justify-content:space-between;flex-wrap:wrap;margin-bottom:calc(1.25rem * var(--mantine-scale));color:var(--mantine-color-white);width:100%" class="m_8bffd616 mantine-Flex-root __m__-Rdknm"><a class="border border-white/20 rounded-lg md:hover:scale-[1.01] transition hover:shadow-lg duration-200 cursor-pointer drop-shadow-md p-3 mb-3" style="background-image:url(/assets/background/noise50.png)" href="/projects/personapersonality"><p class="mantine-focus-auto font-sans m_b6d8b162 mantine-Text-root">Previous</p><div style="gap:var(--mantine-spacing-sm);align-items:center" class="m_8bffd616 mantine-Flex-root __m__-Rjddknm"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-arrow-left "><path d="M5 12l14 0"></path><path d="M5 12l6 6"></path><path d="M5 12l6 -6"></path></svg><p class="mantine-focus-auto text-sm font-sans font-bold text-left m_b6d8b162 mantine-Text-root"> <!-- -->Persona Personality: Discover the personality masks of my friends!</p></div></a><a class="border border-white/20 ml-auto rounded-lg md:hover:scale-[1.01] transition hover:shadow-lg duration-200 cursor-pointer drop-shadow-md p-3 mb-3" style="background-image:url(/assets/background/noise50.png)" href="/projects/linklink"><p class="mantine-focus-auto text-right font-sans m_b6d8b162 mantine-Text-root">Next</p><div style="gap:var(--mantine-spacing-sm);align-items:center" class="m_8bffd616 mantine-Flex-root __m__-Rlddknm"><p class="mantine-focus-auto text-sm font-bold text-right font-sans m_b6d8b162 mantine-Text-root">Visualize my friend&#x27;s social network</p><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-arrow-right "><path d="M5 12l14 0"></path><path d="M13 18l6 -6"></path><path d="M13 6l6 6"></path></svg></div></a></div></div><section></section></article></div><div style="background-image:linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,1));width:100%;height:calc(5rem * var(--mantine-scale));position:fixed;bottom:0rem" class="z-50"></div><div style="height:1000px;background-image:url(/assets/background/noise30.png)" class="absolute bottom-0 bg-red-400 w-full -z-10"><div style="height:500px;width:100%;background-image:linear-gradient(to bottom, rgba(0,0,0,1), rgba(0,0,0,0));position:absolute;top:0rem;left:0rem" class=""></div></div></main></div></main></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"project":{"title":"Toonie: Real-time Collaborative image review editor","date":"2022-08-19","slug":"toonie","author":{"name":"Kim Dong Hun"},"content":"\u003cp\u003eCollaborative editing is a rising star in software development. Now, people not only want smart editors, but they also want an editor that allows real-time collaboration with other people. Collaborating with other people is a great way to increase productivity and get feedback on your work. The COVID-19 pandemic familiarized people with the concept of collaborative editing, and now, many people are using collaborative editors in their daily lives.\u003c/p\u003e\n\u003ch3\u003eDifficulties in implementing multiplayer editors\u003c/h3\u003e\n\u003cp\u003eHowever, implementing a multiplayer aspect into an editor is not an easy task. First, one should have basic knowledge of how to manage multiple actions from multiple agents. What happens if two people try to edit the same part of the document at the same time? What happens if one person deletes a part of the document while the other person is editing the same part? These are the questions that one should be able to answer when they want to implement a collaborative editor.\u003c/p\u003e\n\u003cp\u003eSecond, one should have to decide what features shall be communicated between users, and how their concurrent actions do not cause overhead. Relaying data between users can be costly and unreliable in some cases, so one should carefully design the data flow between users in a way that it does not harm user experience.\u003c/p\u003e\n\u003ch3\u003eBuilding a whiteboard multiplayer editor\u003c/h3\u003e\n\u003cp\u003eToonie is a real-time CRDT-based collaborative image review editor that I created to research optimization techniques for implementing CRDT mechanisms into whiteboards. In Toonie, users can review on images uploaded to the service together by sharing a URL to another person. The reason I chose an image review domain specifically is because most collaborative editors out there are for general purposes. Thus, I wanted to create a more narrow focused whiteboard where designers and marketers could review on images together by drawing sketches on the images in an online meeting setting.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/project/toonie/edit.png\" alt=\"Editing Scene\"\u003e\u003c/p\u003e\n\u003cp\u003eToonie wass built on top of the CRDT-based collaborative SDK called \u003ca href=\"https://github.com/yorkie-team/yorkie\"\u003eYorkie\u003c/a\u003e which is an opensource document store for building collaborative applications created by Naver Alto TF. While contributing to the opensource project, I created Toonie for demonstrating the capabilities of Yorkie.\u003c/p\u003e\n\u003ch3\u003eHow Toonie works\u003c/h3\u003e\n\u003cp\u003eWhen creating a multiplayer whiteboard, one should distinguish between actions that need its commit order to be preserved and actions that do not need its commit order to be preserved. This is because in multiplayer operations, actions that needs its order to be preserved consume much computer resources during communication, which can eventually result in lags.\u003c/p\u003e\n\u003cp\u003eIn Yorkie, actions that do not need its order to be preserved were managed as \u003ccode\u003ePresence\u003c/code\u003e, and those that needed its order to be preserved (= that is in need of management through CRDT algorithms) were managed as \u003ccode\u003eData\u003c/code\u003e. In a whiteboard application, the real-time action (interactions that the user commits to the whiteboard while their mouse is down) do not really need to be communcated with its order preserved since their actions are not finished, and thus can be managed as \u003ccode\u003ePresence\u003c/code\u003e. However, the committed action, which is a finished action of a user (mouse up after mouse down) should have its order preserved since it is a finished action. Those were managed as \u003ccode\u003eData\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/project/toonie/soc_step1.png\" alt=\"User interaction recorded as presenc\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/project/toonie/soc_step2.png\" alt=\"User interaction finishes and presence is reset\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/project/toonie/soc_step3.png\" alt=\"Presence modifications are transferred to data\"\u003e\u003c/p\u003e\n\u003ch3\u003eMethods of Optimization\u003c/h3\u003e\n\u003cp\u003eSeparation of concerns was used for implementing the distinction between \u003ccode\u003ePresence\u003c/code\u003e and \u003ccode\u003eData\u003c/code\u003e, and thus multiple layers (presence canvas and data canvas) were designed for the whiteboard application. A user's real-time unfinished interactions (whiteboard modifications that occur while the user's mouse is pressed) were drawn in the \u003ccode\u003ePresence\u003c/code\u003e canvas. And as soon as the user's interaction finishes (user finishes modification by mouseup), then the \u003ccode\u003ePresence\u003c/code\u003e canvas data is reset and the modification data is sent to the \u003ccode\u003eData\u003c/code\u003e Canvas. By doing so, I was able to design a software design approach for optimizing collaborative whiteboards.\u003c/p\u003e","keyword":"collaboration","categories":["Web Development","Computer Graphics"],"thumbnail":"/assets/project/toonie/thumbnail.png","excerpt":"Toonie is a real-time CRDT-based collaborative image review editor designed for streamlined image feedback. It introduces optimized techniques for multiplayer whiteboards, separating real-time interactions from committed actions for enhanced performance.","data":{"title":"Toonie: Real-time Collaborative image review editor","excerpt":"Toonie is a real-time CRDT-based collaborative image review editor designed for streamlined image feedback. It introduces optimized techniques for multiplayer whiteboards, separating real-time interactions from committed actions for enhanced performance.","startDate":"2022-06-27","date":"2022-08-19","author":{"name":"Kim Dong Hun"},"keyword":"collaboration","categories":["Web Development","Computer Graphics"],"thumbnail":"/assets/project/toonie/thumbnail.png","WIP":false},"prevPath":"/projects/personapersonality","nextPath":"/projects/linklink","prevTitle":"Persona Personality: Discover the personality masks of my friends!","nextTitle":"Visualize my friend's social network","isMdx":false}},"__N_SSG":true},"page":"/projects/[slug]","query":{"slug":"toonie"},"buildId":"Nrx6G7fzvUnEFg3X6aJNX","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>